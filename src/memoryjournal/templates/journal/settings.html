<!doctype html>
<!-- Journal Settings -->
{% extends "journal/index.html" %}
{% block title %}Settings - {{ super() }}{% endblock %}
{% block quote %}
<i>
	"Okay."<br>
	"Okay."
</i>
{% endblock %}
{% block content %}
<nav class="navbar navbar-expand-md navbar-light bg-white rounded border-bottom mb-2">
	<div class="container-fluid">
		<a class="navbar-brand fs-4 fw-bold text-dark text-decoration-none"
			href="{{ url_for('journal.index') }}">
			<span>{{ g.journal["journalname"] }}</span>
		</a>
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#journalNavbar" aria-controls="journalNavbar" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse justify-content-md-end" id="journalNavbar">
		 	<ul class="navbar-nav mb-auto mb-lg-0">
		 		<li class="nav-item">
		 			<a class="nav-link" href="{{ url_for('journal.index') }}">
		 				<i class="material-icons d-inline-block align-text-bottom">dashboard</i> Overview
		 			</a>
		 		</li>
		 		<li class="nav-item">
		 			<a class="nav-link" href="{{ url_for('journal.list_memories') }}">
		 				<i class="material-icons d-inline-block align-text-bottom">view_timeline</i> Timeline
		 			</a>
		 		</li>
		 		<li class="nav-item">
		 			<a class="nav-link" href="{{ url_for('journal.add_memory') }}">
		 				<i class="material-icons d-inline-block align-text-bottom">add_box</i> Add memory
		 			</a>
		 		</li>
		 		<li class="nav-item">
		 			<a class="nav-link" href="{{ url_for('auth.close_journal') }}">
		 				<i class="material-icons d-inline-block align-text-bottom">cancel</i> Close Journal
		 			</a>
		 		</li>
		 		<li class="nav-item">
		 			<a class="nav-link active" href="{{ url_for('journal.settings') }}">
		 				<i class="material-icons d-inline-block align-text-bottom">settings</i> Settings
		 			</a>
		 		</li>
		 	</ul>
		</div>
	</div>
</nav>
<!--a class="fw-bold text-dark fs-5 py-3">Journal Settings</a>
<br><br>


<!-- Edit Name -->
<form action="{{ url_for('auth.edit_journalname') }}" method="post">
	<label class="form-label fw-bold fs-5">Journal name</label>
	<div class="row">
		<div class="col-auto">
			<div class="input-group mb-3">
				<input type="text" class="form-control bg-white" value="{{ g.journal['journalname'] }}" disabled>
				<button class="btn btn-outline-primary" type="button" data-bs-toggle="modal" data-bs-target="#editJournalName">
					Edit
				</button>
			</div>
		</div>
	</div>
	<div class="modal fade" id="editJournalName" tabindex="-1" aria-labelledby="editname" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="editname">Edit Journal Name</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="mb-3">
						<label for="new_name" class="form-label">Journal Name</label>
						<input type="text" class="form-control" id="new_name" name="new_name" value="{{ g.journal['journalname'] }}">
					</div>
				</div>
				<div class="modal-footer">
  				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
  				<button type="submit" class="btn btn-primary">Save</button>
  			</div>
			</div>
		</div>
	</div>
	<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
</form>
<!-- Edit Password -->
<form action="{{ url_for('auth.edit_password') }}" method="post">
	<label class="form-label fw-bold fs-5">Password</label>
	<div class="row">
		<div class="col-auto mb-4">
			<button class="btn btn-outline-primary" type="button" data-bs-toggle="modal" data-bs-target="#editPassword">
				Change Password
			</button>
		</div>
	</div>
	<div class="modal fade" id="editPassword" tabindex="-1" aria-labelledby="editpassword" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="editpassword">Change Password</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="mb-3">
						<label for="current_password" class="form-label">Current Password</label>
						<input type="password" class="form-control" id="current_password" name="current_password">
					</div>
					<div class="mb-3">
						<label for="new_password" class="form-label">New Password</label>
						<input type="password" class="form-control" id="new_password" name="new_password">
					</div>
					<div class="mb-3">
						<label for="confirm_new_password" class="form-label">Confirm New Password</label>
						<input type="password" class="form-control" id="confirm_new_password" name="confirm_new_password">
					</div>
				</div>
				<div class="modal-footer">
  				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
  				<button type="submit" class="btn btn-primary">Save</button>
  			</div>
			</div>
		</div>
	</div>
	<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
</form>
<!-- Delete Journal -->
<form action="{{ url_for('auth.delete_journal') }}" method="post">
	<button class="btn " type="button" data-bs-toggle="modal" data-bs-target="#deleteConfirmation" style="background-color:#B40B08;">
	<div class="d-inline-block text-white">
		<i class="material-icons d-inline-block align-text-bottom" style="color:white;">delete</i> 
		<span> Delete Journal</span>
	</button>
	<div class="modal fade" id="deleteConfirmation" tabindex="-1" aria-label="confirm" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="confirm">Confirm delete</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					{% if error %}
					<div class="alert alert-danger">{{ error }}</div>
					{% else %}
						<p>
							Are you sure you want to delete the journal - <b>{{ g.journal["journalname"] }}</b>?<br>
							Enter journal password to confirm.
						</p>
					{% endif %}
					<div class="mb-3">
						<label for="password" class="form-label">Password</label>
						<input type="password" class="form-control" id="password" name="password">
					</div>
				</div>
				<div class="modal-footer">
  				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
  				<button type="submit" class="btn btn-danger">Delete</button>
  			</div>
			</div>
		</div>
	</div>
	<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
</form>
{% endblock %}

