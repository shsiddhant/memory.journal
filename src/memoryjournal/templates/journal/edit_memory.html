<!doctype html>
{% extends "journal/index.html" %}
{% block title %}Edit Memory - {{ super() }}{% endblock %}
{% block quote %}
<i>
	"Bye Joel."<br>
	"I love you."<br>
	"Meet me... in Montauk..."<br>
</i>
{% endblock %}
{% block content %}
<nav class="navbar navbar-expand-md navbar-light bg-white rounded border-bottom mb-2">
	<div class="container-fluid">
		<a class="navbar-brand fs-4 fw-bold text-dark text-decoration-none"
			href="{{ url_for('journal.index') }}">
			<span>{{ g.journal["journalname"] }}</span>
		</a>
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#journalNavbar" aria-controls="journalNavbar" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse justify-content-md-end" id="journalNavbar">
		 	<ul class="navbar-nav mb-auto mb-lg-0">
		 		<li class="nav-item">
		 			<a class="nav-link" href="{{ url_for('journal.index') }}">
		 				<i class="material-icons d-inline-block align-text-bottom">dashboard</i> Overview
		 			</a>
		 		</li>
		 		<li class="nav-item">
		 			<a class="nav-link" href="{{ url_for('journal.list_memories') }}">
		 				<i class="material-icons d-inline-block align-text-bottom">view_timeline</i> Timeline
		 			</a>
		 		</li>
		 		<li class="nav-item">
		 			<a class="nav-link" href="{{ url_for('journal.settings') }}">
		 				<i class="material-icons d-inline-block align-text-bottom">settings</i> Settings
		 			</a>
		 		</li>
				<li class="nav-item">
					<a class="nav-link active" href="{{ url_for('journal.edit_memory', id=memory['id']) }}">
						<i class="material-icons d-inline-block align-text-bottom">edit_square</i> Edit Memory
					</a>
				</li>
		 	</ul>
		</div>
	</div>
</nav>
<a class="fw-bold text-dark fs-5 py-3">Edit Memory</a>
<form method="post" class="row g-3 my-2" autocomplete="off">
	<div class="col-md-2 mb-2">
		<label for="memorydate" class="fw-bold form-label">Date</label>
		<input type="date" class="form-control" id="memorydate" name="memorydate" value="{{ request.form['memorydate'] or memory['memorydate'].strftime('%Y-%m-%d') }}" required>
	</div>
	<div class="col-md-4">
		<label for="title" class="fw-bold form-label">Title</label>
		<input type="text" class="form-control" id="title" name="title" placeholder="Enter a title." value="{{ request.form['title'] or memory['title'] }}" required>
	</div>
	<div class="col-10">
		<label for="body" class="fw-bold form-label">Description</label>
		<textarea class="form-control" id="body" name="body" rows="15" placeholder="Markdown is supported." required>{{ request.form['body'] or memory['body'] }}</textarea>
	</div>
	<div class="col-6">
		<label for="tags" class="fw-bold form-label">Tags</label>
		<input type="text" class="form-control" id="tags" name="tags" placeholder="Comma separated tags." value="{{ request.form['tags'] or tags }}">
	</div>
	<div class="col-12 mb-4">
		<button type="submit" class="btn btn-primary">Save</button>
	</div>
	<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
</form>
<!-- Delete Memory -->
<form action="{{ url_for('journal.delete_memory', id=memory['id']) }}" method="post">
	<button class="btn " type="button" data-bs-toggle="modal" data-bs-target="#deleteConfirmation" style="background-color:#B40B08;">
	<div class="d-inline-block text-white">
		<i class="material-icons d-inline-block align-text-bottom" style="color:white;">delete</i> 
		<span> Delete Memory</span>
	</button>
	<div class="modal fade" id="deleteConfirmation" tabindex="-1" aria-label="confirm" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="confirm">Confirm delete</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					{% if error %}
					<div class="alert alert-danger">{{ error }}</div>
					{% else %}
						<p>
							Are you sure you want to delete the memory? This deletion cannot be reverted.
						</p>
					{% endif %}
				<div class="modal-footer">
  				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
  				<button type="submit" class="btn btn-danger" style="background-color:#B40B08;">Delete</button>
  			</div>
			</div>
		</div>
	</div>
	<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
</form>
{% endblock %}
